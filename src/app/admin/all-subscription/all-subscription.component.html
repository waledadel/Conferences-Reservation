<div class="container-fluid table-container" [class.px-0]="model.isMobileView">
  <div class="w-100" [ngClass]="model.isMobileView ? 'h-100' : 'mt-2'">
    <div class="w-100 d-flex h-100">
      <div *ngIf="model.dataSource && model.dataSource.data.length < 1" class="w-100">
        <app-empty-data></app-empty-data>
      </div>
      <div [hidden]="model.dataSource && model.dataSource.data.length < 1" class="mat-elevation-z8">
        <table mat-table [dataSource]="model.dataSource" matSort matSortActive="name" matSortDirection="asc"
          matSortDisableClear="true">
          <ng-container matColumnDef="mobileView">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element" class="py-2">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <div class="d-flex">
                    <div [ngSwitch]="element.bookingStatus" class="mb-2">
                      <div *ngSwitchCase="model.bookingStatus.confirmed">
                        <div class="badge px-2 py-1 badge-info">{{ 'bookingStatus.confirmed' | translate }}</div>
                      </div>
                      <div *ngSwitchCase="model.bookingStatus.duplicated">
                        <div class="badge px-2 py-1 badge-warning">{{ 'bookingStatus.duplicated' | translate }}</div>
                      </div>
                      <div *ngSwitchCase="model.bookingStatus.canceled">
                        <div class="badge px-2 py-1 badge-danger">{{ 'bookingStatus.canceled' | translate }}</div>
                      </div>
                      <div *ngSwitchCase="model.bookingStatus.waiting">
                        <div class="badge px-2 py-1 badge-secondary">{{ 'bookingStatus.waiting' | translate }}</div>
                      </div>
                      <div *ngSwitchDefault>
                        <div class="badge px-2 py-1 badge-success">{{ 'bookingStatus.new' | translate }}</div>
                      </div>
                    </div>
                    <span class="mx-2">
                      <mat-icon *ngIf="element.isChild" color="primary">child_care</mat-icon>
                      <mat-icon *ngIf="element.isMain" color="primary">star</mat-icon>
                    </span>
                  </div>
                  <div><b>{{'common.name' | translate}}:</b> {{element.name}}</div>
                  <div class="d-flex">
                    <b>{{'common.mobile' | translate}}:</b>
                    {{ element.mobile }}
                  </div>
                  <div><b>{{'common.birthDate' | translate}}:</b> {{ element.birthDate.toMillis() | date }}</div>
                  <div><b>{{'common.age' | translate}}:</b> {{element.age}}</div>
                  <div class="d-flex flex-row">
                    <b>{{'common.gender' | translate}}:</b>&nbsp;
                    <ng-container [ngSwitch]="element.gender">
                      <div *ngSwitchCase="1">
                        {{ 'common.male' | translate }}
                      </div>
                      <div *ngSwitchDefault>
                        {{ 'common.female' | translate }}
                      </div>
                    </ng-container>
                  </div>
                  <div><b>{{'menu.address' | translate}}:</b> {{element.address}}</div>
                  <div><b>{{'common.transportationName' | translate}}:</b> {{element.transportationName}}</div>
                  <div class="d-flex">
                    <b>{{'common.room' | translate}}:</b>&nbsp;
                    <ng-container *ngIf="element.displayedRoomName; else empty">
                      {{ element.displayedRoomName }}
                    </ng-container>
                  </div>
                </div>
                <div class="d-flex justify-content-between flex-column">
                  <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? model.selection.toggle(element) : null"
                    [checked]="model.selection.isSelected(element)"
                    [aria-label]="checkboxLabel(element)"
                    color="primary">
                  </mat-checkbox>
                  <app-social-media [mobile]="element.mobile"></app-social-media>
                </div>
              </div>
    
            </td>
            <td mat-footer-cell *matFooterCellDef class="px-0">
              <div class="d-flex justify-content-between align-items-center">
                <div class="pr-3">{{'common.total' | translate}}: <b>{{model.total}}</b></div>
              </div>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
              <mat-checkbox (change)="$event ? toggleAllRows() : null"
                [checked]="model.selection.hasValue() && isAllSelected()"
                [indeterminate]="model.selection.hasValue() && !isAllSelected()"
                [aria-label]="checkboxLabel()"
                color="primary">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
              <mat-checkbox (click)="$event.stopPropagation()"
                (change)="$event ? model.selection.toggle(row) : null"
                [checked]="model.selection.isSelected(row)"
                [aria-label]="checkboxLabel(row)"
                color="primary">
              </mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef>
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.name' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="col-2">
              <div class="d-flex">
                <div class="d-flex flex-column">
                  <div>{{element.name}}</div>
                  <small *ngIf="!element.isMain" class="text-success">
                    {{element.mainMemberName}} <i class="fa-solid fa-star"></i>
                  </small>
                </div>
                <div class="px-2">
                  <i *ngIf="element.isChild" class="fa-solid fa-child primary"></i>
                  <i *ngIf="element.isMain" class="fa-solid fa-star primary"></i>
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="mobile">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.mobile' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="width-135">
              <div class="text-center">
                <div>{{ element.mobile}}</div>
                <app-social-media [mobile]="element.mobile"></app-social-media>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="birthDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.birthDate' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="width-135">
              {{ element.birthDate.toMillis() | date }}
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="gender">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.gender' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="col-1">
              <ng-container [ngSwitch]="element.gender">
                <div *ngSwitchCase="1">
                  {{ 'common.male' | translate }}
                </div>
                <div *ngSwitchDefault>
                  {{ 'common.female' | translate }}
                </div>
              </ng-container>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'menu.address' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="col-1">{{element.address}}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="age">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.age' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="col-1">{{element.age}}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <ng-container matColumnDef="transportation">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.transportationName' | translate}}</th>
            <td mat-cell *matCellDef="let element">{{ element.transportationName }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              {{'common.bookingStatus' | translate}}
            </th>
            <td mat-cell *matCellDef="let element" class="col-1">
              <ng-container [ngSwitch]="element.bookingStatus">
                <div *ngSwitchCase="model.bookingStatus.confirmed">
                  <div class="badge px-2 py-1 badge-info">{{ 'bookingStatus.confirmed' | translate }}</div>
                </div>
                <div *ngSwitchCase="model.bookingStatus.duplicated">
                  <div class="badge px-2 py-1 badge-warning">{{ 'bookingStatus.duplicated' | translate }}</div>
                </div>
                <div *ngSwitchCase="model.bookingStatus.canceled">
                  <div class="badge px-2 py-1 badge-danger">{{ 'bookingStatus.canceled' | translate }}</div>
                </div>
                <div *ngSwitchCase="model.bookingStatus.waiting">
                  <div class="badge px-2 py-1 badge-secondary">{{ 'bookingStatus.waiting' | translate }}</div>
                </div>
                <div *ngSwitchDefault>
                  <div class="badge px-2 py-1 badge-success">{{ 'bookingStatus.new' | translate }}</div>
                </div>
              </ng-container>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
    
          <ng-container matColumnDef="room">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'common.room' | translate}}</th>
            <td mat-cell *matCellDef="let element" class="col-3">
              <ng-container *ngIf="element.displayedRoomName; else empty">
                {{ element.displayedRoomName }}
              </ng-container>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="col-1"></th>
            <td mat-cell *matCellDef="let element">
              <button mat-stroked-button color="primary" (click)="addRoomToMember(element)">
                تسكين
              </button>
            </td>
            <td mat-footer-cell *matFooterCellDef>
              الإجمالي: <b>{{model.total}}</b> 
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="model.displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: model.displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="model.displayedColumns; sticky: true"></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<button mat-icon-button color="primary" class="mobile-filter-button d-flex" [matMenuTriggerFor]="menu">
  <i class="fa-solid fa-gear"></i>
  <mat-menu #menu="matMenu">
    <button mat-menu-item class="primary" (click)="showAdvancedFilter()">
      <i class="fa-solid fa-filter"></i>&nbsp;
      البحث المتقدم
    </button>
    <button mat-menu-item class="primary" (click)="openExportModal()">
      <i class="fa-solid fa-download"></i>&nbsp;
      تصدير الأعضاء 
    </button>
  </mat-menu>
</button>

<ng-template #empty>---</ng-template>
